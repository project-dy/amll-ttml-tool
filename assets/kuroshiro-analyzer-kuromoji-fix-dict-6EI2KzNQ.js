var Jn=Object.defineProperty;var Vn=(ut,it,Q)=>it in ut?Jn(ut,it,{enumerable:!0,configurable:!0,writable:!0,value:Q}):ut[it]=Q;var mn=(ut,it,Q)=>Vn(ut,typeof it!="symbol"?it+"":it,Q);import{g as Gn}from"./pixi-Cal6uEV8.js";import"./naive-ui-B1s3zDcz.js";let Dt,zt,Yn=(async()=>{function ut(t,n,e,r,o,c,a,k){this.name=t,this.cost=n,this.start_pos=e,this.length=r,this.left_id=c,this.right_id=a,this.prev=null,this.surface_form=k,o==="BOS"?this.shortest_cost=0:this.shortest_cost=Number.MAX_VALUE,this.type=o}function it(){this.nodes_end_at=[],this.nodes_end_at[0]=[new ut(-1,0,0,0,"BOS",0,0,"")],this.eos_pos=1}it.prototype.append=function(t){const n=t.start_pos+t.length-1;this.eos_pos<n&&(this.eos_pos=n);let e=this.nodes_end_at[n];e==null&&(e=[]),e.push(t),this.nodes_end_at[n]=e},it.prototype.appendEos=function(){const t=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[t]=[new ut(-1,0,this.eos_pos,0,"EOS",0,0,"")]};function Q(t){this.str=t,this.index_mapping=[];for(let n=0;n<t.length;n++){const e=t.charAt(n);this.index_mapping.push(n),Q.isSurrogatePair(e)&&n++}this.length=this.index_mapping.length}Q.prototype.slice=function(t){if(this.index_mapping.length<=t)return"";const n=this.index_mapping[t];return this.str.slice(n)},Q.prototype.charAt=function(t){if(this.str.length<=t)return"";const n=this.index_mapping[t],e=this.index_mapping[t+1];return e==null?this.str.slice(n):this.str.slice(n,e)},Q.prototype.charCodeAt=function(t){if(this.index_mapping.length<=t)return NaN;const n=this.index_mapping[t],e=this.str.charCodeAt(n);let r;return e>=55296&&e<=56319&&n<this.str.length&&(r=this.str.charCodeAt(n+1),r>=56320&&r<=57343)?(e-55296)*1024+r-56320+65536:e},Q.prototype.toString=function(){return this.str},Q.isSurrogatePair=function(t){const n=t.charCodeAt(0);return n>=55296&&n<=56319};function $t(t){this.trie=t.trie,this.token_info_dictionary=t.token_info_dictionary,this.unknown_dictionary=t.unknown_dictionary}$t.prototype.build=function(t){const n=new it,e=new Q(t);let r,o,c,a,k;for(let v=0;v<e.length;v++){const x=e.slice(v),K=this.trie.commonPrefixSearch(x);for(let L=0;L<K.length;L++){o=K[L].v,r=K[L].k;const H=this.token_info_dictionary.target_map[o];for(let M=0;M<H.length;M++){const I=parseInt(H[M]);c=this.token_info_dictionary.dictionary.getShort(I),a=this.token_info_dictionary.dictionary.getShort(I+2),k=this.token_info_dictionary.dictionary.getShort(I+4),n.append(new ut(I,k,v+1,r.length,"KNOWN",c,a,r))}}const j=new Q(x),U=new Q(j.charAt(0)),P=this.unknown_dictionary.lookup(U.toString());if(K==null||K.length===0||P.is_always_invoke===1){if(r=U,P.is_grouping===1&&1<j.length)for(let H=1;H<j.length;H++){const M=j.charAt(H),I=this.unknown_dictionary.lookup(M);if(P.class_name!==I.class_name)break;r+=M}const L=this.unknown_dictionary.target_map[P.class_id];for(let H=0;H<L.length;H++){const M=parseInt(L[H]);c=this.unknown_dictionary.dictionary.getShort(M),a=this.unknown_dictionary.dictionary.getShort(M+2),k=this.unknown_dictionary.dictionary.getShort(M+4),n.append(new ut(M,k,v+1,r.length,"UNKNOWN",c,a,r.toString()))}}}return n.appendEos(),n};function vt(t){this.connection_costs=t}vt.prototype.search=function(t){return t=this.forward(t),this.backward(t)},vt.prototype.forward=function(t){let n,e,r;for(n=1;n<=t.eos_pos;n++){const o=t.nodes_end_at[n];if(o!=null)for(e=0;e<o.length;e++){const c=o[e];let a=Number.MAX_VALUE,k;const v=t.nodes_end_at[c.start_pos-1];if(v!=null){for(r=0;r<v.length;r++){const x=v[r];let K;c.left_id==null||x.right_id==null?(console.log("Left or right is null"),K=0):K=this.connection_costs.get(x.right_id,c.left_id);const j=x.shortest_cost+K+c.cost;j<a&&(k=x,a=j)}c.prev=k,c.shortest_cost=a}}}return t},vt.prototype.backward=function(t){const n=[];let e=t.nodes_end_at[t.nodes_end_at.length-1][0].prev;if(e==null)return[];for(;e.type!=="BOS";){if(n.push(e),e.prev==null)return[];e=e.prev}return n.reverse()};function Ut(){}Ut.prototype.formatEntry=function(t,n,e,r){const o={};return o.word_id=t,o.word_type=e,o.word_position=n,o.surface_form=r[0],o.pos=r[1],o.pos_detail_1=r[2],o.pos_detail_2=r[3],o.pos_detail_3=r[4],o.conjugated_type=r[5],o.conjugated_form=r[6],o.basic_form=r[7],o.reading=r[8],o.pronunciation=r[9],o},Ut.prototype.formatUnknownEntry=function(t,n,e,r,o){const c={};return c.word_id=t,c.word_type=e,c.word_position=n,c.surface_form=o,c.pos=r[1],c.pos_detail_1=r[2],c.pos_detail_2=r[3],c.pos_detail_3=r[4],c.conjugated_type=r[5],c.conjugated_form=r[6],c.basic_form=r[7],c};const _n=/、|。/;function mt(t){this.token_info_dictionary=t.token_info_dictionary,this.unknown_dictionary=t.unknown_dictionary,this.viterbi_builder=new $t(t),this.viterbi_searcher=new vt(t.connection_costs),this.formatter=new Ut}mt.splitByPunctuation=function(t){const n=[];let e=t;for(;e!=="";){const r=e.search(_n);if(r<0){n.push(e);break}n.push(e.substring(0,r+1)),e=e.substring(r+1)}return n},mt.prototype.tokenize=function(t){const n=mt.splitByPunctuation(t),e=[];for(let r=0;r<n.length;r++){const o=n[r];this.tokenizeForSentence(o,e)}return e},mt.prototype.tokenizeForSentence=function(t,n){n==null&&(n=[]);const e=this.getLattice(t),r=this.viterbi_searcher.search(e);let o=0;n.length>0&&(o=n[n.length-1].word_position);for(let c=0;c<r.length;c++){const a=r[c];let k,v,x;a.type==="KNOWN"?(x=this.token_info_dictionary.getFeatures(a.name),x==null?v=[]:v=x.split(","),k=this.formatter.formatEntry(a.name,o+a.start_pos,a.type,v)):a.type==="UNKNOWN"?(x=this.unknown_dictionary.getFeatures(a.name),x==null?v=[]:v=x.split(","),k=this.formatter.formatUnknownEntry(a.name,o+a.start_pos,a.type,v,a.surface_form)):k=this.formatter.formatEntry(a.name,o+a.start_pos,a.type,[]),n.push(k)}return n},mt.prototype.getLattice=function(t){return this.viterbi_builder.build(t)};var Jt={},wn=function(t,n,e,r,o){var c=new Worker(Jt[n]||(Jt[n]=URL.createObjectURL(new Blob([t+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return c.onmessage=function(a){var k=a.data,v=k.$e$;if(v){var x=new Error(v[0]);x.code=v[1],x.stack=v[2],o(x,null)}else o(null,k)},c.postMessage(e,r),c},Z=Uint8Array,lt=Uint16Array,Vt=Int32Array,Nt=new Z([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),It=new Z([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gt=new Z([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Yt=function(t,n){for(var e=new lt(31),r=0;r<31;++r)e[r]=n+=1<<t[r-1];for(var o=new Vt(e[30]),r=1;r<30;++r)for(var c=e[r];c<e[r+1];++c)o[c]=c-e[r]<<5|r;return{b:e,r:o}},Wt=Yt(Nt,2),Kt=Wt.b,kn=Wt.r;Kt[28]=258,kn[258]=28;for(var bn=Yt(It,0),qt=bn.b,xt=new lt(32768),J=0;J<32768;++J){var ft=(J&43690)>>1|(J&21845)<<1;ft=(ft&52428)>>2|(ft&13107)<<2,ft=(ft&61680)>>4|(ft&3855)<<4,xt[J]=((ft&65280)>>8|(ft&255)<<8)>>1}for(var _t=function(t,n,e){for(var r=t.length,o=0,c=new lt(n);o<r;++o)t[o]&&++c[t[o]-1];var a=new lt(n);for(o=1;o<n;++o)a[o]=a[o-1]+c[o-1]<<1;var k;if(e){k=new lt(1<<n);var v=15-n;for(o=0;o<r;++o)if(t[o])for(var x=o<<4|t[o],K=n-t[o],j=a[t[o]-1]++<<K,U=j|(1<<K)-1;j<=U;++j)k[xt[j]>>v]=x}else for(k=new lt(r),o=0;o<r;++o)t[o]&&(k[o]=xt[a[t[o]-1]++]>>15-t[o]);return k},kt=new Z(288),J=0;J<144;++J)kt[J]=8;for(var J=144;J<256;++J)kt[J]=9;for(var J=256;J<280;++J)kt[J]=7;for(var J=280;J<288;++J)kt[J]=8;for(var Xt=new Z(32),J=0;J<32;++J)Xt[J]=5;var Qt=_t(kt,9,1),Zt=_t(Xt,5,1),jt=function(t){for(var n=t[0],e=1;e<t.length;++e)t[e]>n&&(n=t[e]);return n},ot=function(t,n,e){var r=n/8|0;return(t[r]|t[r+1]<<8)>>(n&7)&e},At=function(t,n){var e=n/8|0;return(t[e]|t[e+1]<<8|t[e+2]<<16)>>(n&7)},tn=function(t){return(t+7)/8|0},nn=function(t,n,e){return(n==null||n<0)&&(n=0),(e==null||e>t.length)&&(e=t.length),new Z(t.subarray(n,e))},en=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],W=function(t,n,e){var r=new Error(n||en[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,W),!e)throw r;return r},St=function(t,n,e,r){var o=t.length,c=r?r.length:0;if(!o||n.f&&!n.l)return e||new Z(0);var a=!e,k=a||n.i!=2,v=n.i;a&&(e=new Z(o*3));var x=function(q){var V=e.length;if(q>V){var X=new Z(Math.max(V*2,q));X.set(e),e=X}},K=n.f||0,j=n.p||0,U=n.b||0,P=n.l,L=n.d,H=n.m,M=n.n,I=o*8;do{if(!P){K=ot(t,j,1);var d=ot(t,j+1,3);if(j+=3,d)if(d==1)P=Qt,L=Zt,H=9,M=5;else if(d==2){var w=ot(t,j,31)+257,m=ot(t,j+10,15)+4,l=w+ot(t,j+5,31)+1;j+=14;for(var u=new Z(l),g=new Z(19),p=0;p<m;++p)g[Gt[p]]=ot(t,j+p*3,7);j+=m*3;for(var s=jt(g),S=(1<<s)-1,A=_t(g,s,1),p=0;p<l;){var F=A[ot(t,j,S)];j+=F&15;var D=F>>4;if(D<16)u[p++]=D;else{var G=0,st=0;for(D==16?(st=3+ot(t,j,3),j+=2,G=u[p-1]):D==17?(st=3+ot(t,j,7),j+=3):D==18&&(st=11+ot(t,j,127),j+=7);st--;)u[p++]=G}}var i=u.subarray(0,w),_=u.subarray(w);H=jt(i),M=jt(_),P=_t(i,H,1),L=_t(_,M,1)}else W(1);else{var D=tn(j)+4,T=t[D-4]|t[D-3]<<8,b=D+T;if(b>o){v&&W(0);break}k&&x(U+T),e.set(t.subarray(D,b),U),n.b=U+=T,n.p=j=b*8,n.f=K;continue}if(j>I){v&&W(0);break}}k&&x(U+131072);for(var B=(1<<H)-1,tt=(1<<M)-1,y=j;;y=j){var G=P[At(t,j)&B],h=G>>4;if(j+=G&15,j>I){v&&W(0);break}if(G||W(2),h<256)e[U++]=h;else if(h==256){y=j,P=null;break}else{var f=h-254;if(h>264){var p=h-257,C=Nt[p];f=ot(t,j,(1<<C)-1)+Kt[p],j+=C}var O=L[At(t,j)&tt],E=O>>4;O||W(3),j+=O&15;var _=qt[E];if(E>3){var C=It[E];_+=At(t,j)&(1<<C)-1,j+=C}if(j>I){v&&W(0);break}k&&x(U+131072);var z=U+f;if(U<_){var R=c-_,$=Math.min(_,z);for(R+U<0&&W(3);U<$;++U)e[U]=r[R+U]}for(;U<z;++U)e[U]=e[U-_]}}n.l=P,n.p=y,n.b=U,n.f=K,P&&(K=1,n.m=H,n.d=L,n.n=M)}while(!K);return U!=e.length&&a?nn(e,0,U):e.subarray(0,U)},vn=new Z(0),xn=function(t,n){var e={};for(var r in t)e[r]=t[r];for(var r in n)e[r]=n[r];return e},rn=function(t,n,e){for(var r=t(),o=t.toString(),c=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),a=0;a<r.length;++a){var k=r[a],v=c[a];if(typeof k=="function"){n+=";"+v+"=";var x=k.toString();if(k.prototype)if(x.indexOf("[native code]")!=-1){var K=x.indexOf(" ",8)+1;n+=x.slice(K,x.indexOf("(",K))}else{n+=x;for(var j in k.prototype)n+=";"+v+".prototype."+j+"="+k.prototype[j].toString()}else n+=x}else e[v]=k}return n},Ct=[],jn=function(t){var n=[];for(var e in t)t[e].buffer&&n.push((t[e]=new t[e].constructor(t[e])).buffer);return n},An=function(t,n,e,r){if(!Ct[e]){for(var o="",c={},a=t.length-1,k=0;k<a;++k)o=rn(t[k],o,c);Ct[e]={c:rn(t[a],o,c),e:c}}var v=xn({},Ct[e].e);return wn(Ct[e].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",e,v,jn(v),r)},Pt=function(){return[Z,lt,Vt,Nt,It,Gt,Kt,qt,Qt,Zt,xt,en,_t,jt,ot,At,tn,nn,W,St,un,Ot,Bt]},Sn=function(){return[on,an]},Cn=function(){return[sn]},Ot=function(t){return postMessage(t,[t.buffer])},Bt=function(t){return t&&{out:t.size&&new Z(t.size),dictionary:t.dictionary}},Et=function(t,n,e,r,o,c){var a=An(e,r,o,function(k,v){a.terminate(),c(k,v)});return a.postMessage([t,n],n.consume?[t.buffer]:[]),function(){a.terminate()}},on=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&W(6,"invalid gzip data");var n=t[3],e=10;n&4&&(e+=(t[10]|t[11]<<8)+2);for(var r=(n>>3&1)+(n>>4&1);r>0;r-=!t[e++]);return e+(n&2)},an=function(t){var n=t.length;return(t[n-4]|t[n-3]<<8|t[n-2]<<16|t[n-1]<<24)>>>0},sn=function(t,n){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&W(6,"invalid zlib data"),(t[1]>>5&1)==+!n&&W(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function On(t,n,e){return e||(e=n,n={}),typeof e!="function"&&W(7),Et(t,n,[Pt],function(r){return Ot(un(r.data[0],Bt(r.data[1])))},1,e)}function un(t,n){return St(t,{i:2},n&&n.out,n&&n.dictionary)}function Tn(t,n,e){return e||(e=n,n={}),typeof e!="function"&&W(7),Et(t,n,[Pt,Sn,function(){return[cn]}],function(r){return Ot(cn(r.data[0],r.data[1]))},3,e)}function cn(t,n){var e=on(t);return e+8>t.length&&W(6,"invalid gzip data"),St(t.subarray(e,-8),{i:2},n&&n.out||new Z(an(t)),n&&n.dictionary)}function Un(t,n,e){return e||(e=n,n={}),typeof e!="function"&&W(7),Et(t,n,[Pt,Cn,function(){return[fn]}],function(r){return Ot(fn(r.data[0],Bt(r.data[1])))},5,e)}function fn(t,n){return St(t.subarray(sn(t,n&&n.dictionary),-4),{i:2},n&&n.out,n&&n.dictionary)}function Nn(t,n,e){return e||(e=n,n={}),typeof e!="function"&&W(7),t[0]==31&&t[1]==139&&t[2]==8?Tn(t,n,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?On(t,n,e):Un(t,n,e)}var In=typeof TextDecoder<"u"&&new TextDecoder,Kn=0;try{In.decode(vn,{stream:!0}),Kn=1}catch{}var hn={exports:{}};(function(t){(function(){var n="\0",e=0,r=0,o=-1,c=!0,a=!0,k=4,v=4,x=2,K=function(d){d==null&&(d=1024);var w=function(s,S,A){for(var F=S;F<A;F++)s[F]=-F+1;if(0<p.array[p.array.length-1]){for(var D=p.array.length-2;0<p.array[D];)D--;s[S]=-D}},m=function(s,S,A){for(var F=S;F<A;F++)s[F]=-F-1},l=function(s){var S=s*x,A=P(g.signed,g.bytes,S);w(A,g.array.length,S),A.set(g.array),g.array=null,g.array=A;var F=P(p.signed,p.bytes,S);m(F,p.array.length,S),F.set(p.array),p.array=null,p.array=F},u=r+1,g={signed:c,bytes:k,array:P(c,k,d)},p={signed:a,bytes:v,array:P(a,v,d)};return g.array[r]=1,p.array[r]=r,w(g.array,r+1,g.array.length),m(p.array,r+1,p.array.length),{getBaseBuffer:function(){return g.array},getCheckBuffer:function(){return p.array},loadBaseBuffer:function(s){return g.array=s,this},loadCheckBuffer:function(s){return p.array=s,this},size:function(){return Math.max(g.array.length,p.array.length)},getBase:function(s){return g.array.length-1<s?-s+1:g.array[s]},getCheck:function(s){return p.array.length-1<s?-s-1:p.array[s]},setBase:function(s,S){g.array.length-1<s&&l(s),g.array[s]=S},setCheck:function(s,S){p.array.length-1<s&&l(s),p.array[s]=S},setFirstUnusedNode:function(s){u=s},getFirstUnusedNode:function(){return u},shrink:function(){for(var s=this.size()-1;!(0<=p.array[s]);)s--;g.array=g.array.subarray(0,s+2),p.array=p.array.subarray(0,s+2)},calc:function(){for(var s=0,S=p.array.length,A=0;A<S;A++)p.array[A]<0&&s++;return{all:S,unused:s,efficiency:(S-s)/S}},dump:function(){var s="",S="",A;for(A=0;A<g.array.length;A++)s=s+" "+this.getBase(A);for(A=0;A<p.array.length;A++)S=S+" "+this.getCheck(A);return console.log("base:"+s),console.log("chck:"+S),"base:"+s+" chck:"+S}}};function j(d){this.bc=K(d),this.keys=[]}j.prototype.append=function(d,w){return this.keys.push({k:d,v:w}),this},j.prototype.build=function(d,w){if(d==null&&(d=this.keys),d==null)return new U(this.bc);w==null&&(w=!1);var m=d.map(function(l){return{k:H(l.k+n),v:l.v}});return w?this.keys=m:this.keys=m.sort(function(l,u){for(var g=l.k,p=u.k,s=Math.min(g.length,p.length),S=0;S<s;S++)if(g[S]!==p[S])return g[S]-p[S];return g.length-p.length}),m=null,this._build(r,0,0,this.keys.length),new U(this.bc)},j.prototype._build=function(d,w,m,l){var u=this.getChildrenInfo(w,m,l),g=this.findAllocatableBase(u);this.setBC(d,u,g);for(var p=0;p<u.length;p=p+3){var s=u[p];if(s!==e){var S=u[p+1],A=u[p+2],F=g+s;this._build(F,w+1,S,A)}}},j.prototype.getChildrenInfo=function(d,w,m){var l=this.keys[w].k[d],u=0,g=new Int32Array(m*3);g[u++]=l,g[u++]=w;for(var p=w,s=w;p<w+m;p++){var S=this.keys[p].k[d];l!==S&&(g[u++]=p-s,g[u++]=S,g[u++]=p,l=S,s=p)}return g[u++]=p-s,g=g.subarray(0,u),g},j.prototype.setBC=function(d,w,m){var l=this.bc;l.setBase(d,m);var u;for(u=0;u<w.length;u=u+3){var g=w[u],p=m+g,s=-l.getBase(p),S=-l.getCheck(p);p!==l.getFirstUnusedNode()?l.setCheck(s,-S):l.setFirstUnusedNode(S),l.setBase(S,-s);var A=d;if(l.setCheck(p,A),g===e){var F=w[u+1],D=this.keys[F].v;D==null&&(D=0);var G=-D-1;l.setBase(p,G)}}},j.prototype.findAllocatableBase=function(d){for(var w=this.bc,m,l=w.getFirstUnusedNode();;){if(m=l-d[0],m<0){l=-w.getCheck(l);continue}for(var u=!0,g=0;g<d.length;g=g+3){var p=d[g],s=m+p;if(!this.isUnusedNode(s)){l=-w.getCheck(l),u=!1;break}}if(u)return m}},j.prototype.isUnusedNode=function(d){var w=this.bc,m=w.getCheck(d);return d===r?!1:m<0};function U(d){this.bc=d,this.bc.shrink()}U.prototype.contain=function(d){var w=this.bc;d+=n;for(var m=H(d),l=r,u=o,g=0;g<m.length;g++){var p=m[g];if(u=this.traverse(l,p),u===o)return!1;if(w.getBase(u)<=0)return!0;l=u}return!1},U.prototype.lookup=function(d){d+=n;for(var w=H(d),m=r,l=o,u=0;u<w.length;u++){var g=w[u];if(l=this.traverse(m,g),l===o)return o;m=l}var p=this.bc.getBase(l);return p<=0?-p-1:o},U.prototype.commonPrefixSearch=function(d){for(var w=H(d),m=r,l=o,u=[],g=0;g<w.length;g++){var p=w[g];if(l=this.traverse(m,p),l!==o){m=l;var s=this.traverse(l,e);if(s!==o){var S=this.bc.getBase(s),A={};S<=0&&(A.v=-S-1),A.k=M(L(w,0,g+1)),u.push(A)}continue}else break}return u},U.prototype.traverse=function(d,w){var m=this.bc.getBase(d)+w;return this.bc.getCheck(m)===d?m:o},U.prototype.size=function(){return this.bc.size()},U.prototype.calc=function(){return this.bc.calc()},U.prototype.dump=function(){return this.bc.dump()};var P=function(d,w,m){switch(w){case 1:return new Int8Array(m);case 2:return new Int16Array(m);case 4:return new Int32Array(m);default:throw new RangeError("Invalid newArray parameter element_bytes:"+w)}},L=function(d,w,m){var l=new ArrayBuffer(m),u=new Uint8Array(l,0,m),g=d.subarray(w,m);return u.set(g),u},H=function(d){for(var w=new Uint8Array(new ArrayBuffer(d.length*4)),m=0,l=0;m<d.length;){var u,g=d.charCodeAt(m++);if(g>=55296&&g<=56319){var p=g,s=d.charCodeAt(m++);if(s>=56320&&s<=57343)u=(p-55296)*1024+65536+(s-56320);else return null}else u=g;u<128?w[l++]=u:u<2048?(w[l++]=u>>>6|192,w[l++]=u&63|128):u<65536?(w[l++]=u>>>12|224,w[l++]=u>>6&63|128,w[l++]=u&63|128):u<1<<21&&(w[l++]=u>>>18|240,w[l++]=u>>12&63|128,w[l++]=u>>6&63|128,w[l++]=u&63|128)}return w.subarray(0,l)},M=function(d){for(var w="",m,l,u,g,p,s,S,A=0;A<d.length;)l=d[A++],l<128?m=l:l>>5===6?(u=d[A++],m=(l&31)<<6|u&63):l>>4===14?(u=d[A++],g=d[A++],m=(l&15)<<12|(u&63)<<6|g&63):(u=d[A++],g=d[A++],p=d[A++],m=(l&7)<<18|(u&63)<<12|(g&63)<<6|p&63),m<65536?w+=String.fromCharCode(m):(m-=65536,s=55296|m>>10,S=56320|m&1023,w+=String.fromCharCode(s,S));return w},I={builder:function(d){return new j(d)},load:function(d,w){var m=K(0);return m.loadBaseBuffer(d),m.loadCheckBuffer(w),new U(m)}};t.exports=I})()})(hn);var Ft=hn.exports;const Pn=function(t){const n=new Uint8Array(t.length*4);let e=0,r=0;for(;e<t.length;){let o;const c=t.charCodeAt(e++);if(c>=55296&&c<=56319){const a=c,k=t.charCodeAt(e++);if(k>=56320&&k<=57343)o=(a-55296)*1024+65536+(k-56320);else return null}else o=c;o<128?n[r++]=o:o<2048?(n[r++]=o>>>6|192,n[r++]=o&63|128):o<65536?(n[r++]=o>>>12|224,n[r++]=o>>6&63|128,n[r++]=o&63|128):o<1<<21&&(n[r++]=o>>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=o&63|128)}return n.subarray(0,r)},Bn=function(t){let n="",e,r,o,c,a,k,v,x=0;for(;x<t.length;)r=t[x++],r<128?e=r:r>>5===6?(o=t[x++],e=(r&31)<<6|o&63):r>>4===14?(o=t[x++],c=t[x++],e=(r&15)<<12|(o&63)<<6|c&63):(o=t[x++],c=t[x++],a=t[x++],e=(r&7)<<18|(o&63)<<12|(c&63)<<6|a&63),e<65536?n+=String.fromCharCode(e):(e-=65536,k=55296|e>>10,v=56320|e&1023,n+=String.fromCharCode(k,v));return n};function Y(t){let n;if(t==null)n=1024*1024;else if(typeof t=="number")n=t;else if(t instanceof Uint8Array){this.buffer=t,this.position=0;return}else throw`${typeof t} is invalid parameter type for ByteBuffer constructor`;this.buffer=new Uint8Array(n),this.position=0}Y.prototype.size=function(){return this.buffer.length},Y.prototype.reallocate=function(){const t=new Uint8Array(this.buffer.length*2);t.set(this.buffer),this.buffer=t},Y.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer},Y.prototype.put=function(t){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=t},Y.prototype.get=function(t){return t==null&&(t=this.position,this.position+=1),this.buffer.length<t+1?0:this.buffer[t]},Y.prototype.putShort=function(t){if(65535<t)throw`${t} is over short value`;const n=255&t,e=(65280&t)>>8;this.put(n),this.put(e)},Y.prototype.getShort=function(t){if(t==null&&(t=this.position,this.position+=2),this.buffer.length<t+2)return 0;const n=this.buffer[t];let e=(this.buffer[t+1]<<8)+n;return e&32768&&(e=-(e-1^65535)),e},Y.prototype.putInt=function(t){if(4294967295<t)throw`${t} is over integer value`;const n=255&t,e=(65280&t)>>8,r=(16711680&t)>>16,o=(4278190080&t)>>24;this.put(n),this.put(e),this.put(r),this.put(o)},Y.prototype.getInt=function(t){if(t==null&&(t=this.position,this.position+=4),this.buffer.length<t+4)return 0;const n=this.buffer[t],e=this.buffer[t+1],r=this.buffer[t+2];return(this.buffer[t+3]<<24)+(r<<16)+(e<<8)+n},Y.prototype.readInt=function(){const t=this.position;return this.position+=4,this.getInt(t)},Y.prototype.putString=function(t){const n=Pn(t);for(let e=0;e<n.length;e++)this.put(n[e]);this.put(0)},Y.prototype.getString=function(t){const n=[];let e;for(t==null&&(t=this.position);!(this.buffer.length<t+1||(e=this.get(t++),e===0));)n.push(e);return this.position=t,Bn(n)};function at(){this.dictionary=new Y(10*1024*1024),this.target_map={},this.pos_buffer=new Y(10*1024*1024)}at.prototype.buildDictionary=function(t){const n={};for(let e=0;e<t.length;e++){const r=t[e];if(r.length<4)continue;const o=r[0],c=r[1],a=r[2],k=r[3],v=r.slice(4).join(",");isFinite(c)&&isFinite(a)&&isFinite(k)||console.log(r);const x=this.put(c,a,k,o,v);n[x]=o}return this.dictionary.shrink(),this.pos_buffer.shrink(),n},at.prototype.put=function(t,n,e,r,o){const c=this.dictionary.position,a=this.pos_buffer.position;return this.dictionary.putShort(t),this.dictionary.putShort(n),this.dictionary.putShort(e),this.dictionary.putInt(a),this.pos_buffer.putString(`${r},${o}`),c},at.prototype.addMapping=function(t,n){let e=this.target_map[t];e==null&&(e=[]),e.push(n),this.target_map[t]=e},at.prototype.targetMapToBuffer=function(){const t=new Y,n=Object.keys(this.target_map).length;t.putInt(n);for(const e in this.target_map){const r=this.target_map[e],o=r.length;t.putInt(parseInt(e)),t.putInt(o);for(let c=0;c<r.length;c++)t.putInt(r[c])}return t.shrink()},at.prototype.loadDictionary=function(t){return this.dictionary=new Y(t),this},at.prototype.loadPosVector=function(t){return this.pos_buffer=new Y(t),this},at.prototype.loadTargetMap=function(t){const n=new Y(t);for(n.position=0,this.target_map={},n.readInt();!(n.buffer.length<n.position+1);){const e=n.readInt(),r=n.readInt();for(let o=0;o<r;o++){const c=n.readInt();this.addMapping(e,c)}}return this},at.prototype.getFeatures=function(t){const n=parseInt(t);if(isNaN(n))return"";const e=this.dictionary.getInt(n+6);return this.pos_buffer.getString(e)};class ln{constructor(n,e){this.forward_dimension=n,this.backward_dimension=e,this.buffer=new Int16Array(n*e+2),this.buffer[0]=n,this.buffer[1]=e}put(n,e,r){const o=n*this.backward_dimension+e+2;if(this.buffer.length<o+1)throw"ConnectionCosts buffer overflow";this.buffer[o]=r}get(n,e){const r=n*this.backward_dimension+e+2;if(this.buffer.length<r+1)throw"ConnectionCosts buffer overflow";return this.buffer[r]}loadConnectionCosts(n){this.forward_dimension=n[0],this.backward_dimension=n[1],this.buffer=n}}function pn(t,n,e,r,o){this.class_id=t,this.class_name=n,this.is_always_invoke=e,this.is_grouping=r,this.max_length=o}function ht(){this.map=[],this.lookup_table={}}ht.load=function(t){const n=new ht,e=[],r=new Y(t);for(;r.position+1<r.size();){const o=e.length,c=r.get(),a=r.get(),k=r.getInt(),v=r.getString();e.push(new pn(o,v,c,a,k))}return n.init(e),n},ht.prototype.init=function(t){if(t!=null)for(let n=0;n<t.length;n++){const e=t[n];this.map[n]=e,this.lookup_table[e.class_name]=n}},ht.prototype.getCharacterClass=function(t){return this.map[t]},ht.prototype.lookup=function(t){return this.lookup_table[t]??null},ht.prototype.toBuffer=function(){const t=new Y;for(let n=0;n<this.map.length;n++){const e=this.map[n];t.put(e.is_always_invoke),t.put(e.is_grouping),t.putInt(e.max_length),t.putString(e.class_name)}return t.shrink(),t.buffer};const Rt="DEFAULT";function rt(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}rt.load=function(t,n,e){const r=new rt;return r.character_category_map=t,r.compatible_category_map=n,r.invoke_definition_map=ht.load(e),r},rt.parseCharCategory=function(t,n){const e=n[1],r=parseInt(n[2]),o=parseInt(n[3]),c=parseInt(n[4]);if(!isFinite(r)||r!==0&&r!==1)return console.log(`char.def parse error. INVOKE is 0 or 1 in:${r}`),null;if(!isFinite(o)||o!==0&&o!==1)return console.log(`char.def parse error. GROUP is 0 or 1 in:${o}`),null;if(!isFinite(c)||c<0)return console.log(`char.def parse error. LENGTH is 1 to n:${c}`),null;const a=r===1,k=o===1;return new pn(t,e,a,k,c)},rt.parseCategoryMapping=function(t){const n=parseInt(t[1]),e=t[2],r=3<t.length?t.slice(3):[];return(!isFinite(n)||n<0||n>65535)&&console.log(`char.def parse error. CODE is invalid:${n}`),{start:n,default:e,compatible:r}},rt.parseRangeCategoryMapping=function(t){const n=parseInt(t[1]),e=parseInt(t[2]),r=t[3],o=4<t.length?t.slice(4):[];return(!isFinite(n)||n<0||n>65535)&&console.log(`char.def parse error. CODE is invalid:${n}`),(!isFinite(e)||e<0||e>65535)&&console.log(`char.def parse error. CODE is invalid:${e}`),{start:n,end:e,default:r,compatible:o}},rt.prototype.initCategoryMappings=function(t){let n;if(t!=null)for(let r=0;r<t.length;r++){const o=t[r],c=o.end||o.start;for(n=o.start;n<=c;n++){this.character_category_map[n]=this.invoke_definition_map.lookup(o.default);for(let a=0;a<o.compatible.length;a++){let k=this.compatible_category_map[n];const v=o.compatible[a];if(v==null)continue;const x=this.invoke_definition_map.lookup(v);if(x==null)continue;const K=1<<x;k=k|K,this.compatible_category_map[n]=k}}}const e=this.invoke_definition_map.lookup(Rt);if(e!=null)for(n=0;n<this.character_category_map.length;n++)this.character_category_map[n]===0&&(this.character_category_map[n]=1<<e)},rt.prototype.lookupCompatibleCategory=function(t){const n=[],e=t.charCodeAt(0);let r;if(e<this.compatible_category_map.length&&(r=this.compatible_category_map[e]),r==null||r===0)return n;for(let o=0;o<32;o++)if(r<<31-o>>>31===1){const c=this.invoke_definition_map.getCharacterClass(o);if(c==null)continue;n.push(c)}return n},rt.prototype.lookup=function(t){let n;const e=t.charCodeAt(0);return Q.isSurrogatePair(t)?n=this.invoke_definition_map.lookup(Rt):e<this.character_category_map.length&&(n=this.character_category_map[e]),n==null&&(n=this.invoke_definition_map.lookup(Rt)),this.invoke_definition_map.getCharacterClass(n)};function pt(){this.dictionary=new Y(10*1024*1024),this.target_map={},this.pos_buffer=new Y(10*1024*1024),this.character_definition=null}pt.prototype=Object.create(at.prototype),pt.prototype.characterDefinition=function(t){return this.character_definition=t,this},pt.prototype.lookup=function(t){return this.character_definition.lookup(t)},pt.prototype.lookupCompatibleCategory=function(t){return this.character_definition.lookupCompatibleCategory(t)},pt.prototype.loadUnknownDictionaries=function(t,n,e,r,o,c){this.loadDictionary(t),this.loadPosVector(n),this.loadTargetMap(e),this.character_definition=rt.load(r,o,c)};function wt(t,n,e,r){t?this.trie=t:this.trie=Ft.builder(0).build([{k:"",v:1}]),n?this.token_info_dictionary=n:this.token_info_dictionary=new at,e?this.connection_costs=e:this.connection_costs=new ln(0,0),r?this.unknown_dictionary=r:this.unknown_dictionary=new pt}wt.prototype.loadTrie=function(t,n){return this.trie=Ft.load(t,n),this},wt.prototype.loadTokenInfoDictionaries=function(t,n,e){return this.token_info_dictionary.loadDictionary(t),this.token_info_dictionary.loadPosVector(n),this.token_info_dictionary.loadTargetMap(e),this},wt.prototype.loadConnectionCosts=function(t){return this.connection_costs.loadConnectionCosts(t),this},wt.prototype.loadUnknownDictionaries=function(t,n,e,r,o,c){return this.unknown_dictionary.loadUnknownDictionaries(t,n,e,r,o,c),this};function En(...t){return t.join("/")}class Fn{constructor(n){this.dic=new wt,this.dic_path=n}async loadArrayBuffer(n){throw new Error("DictionaryLoader#loadArrayBuffer should be overwritten")}async load(){const n=this.dic,e=this.dic_path,r=this.loadArrayBuffer,o=c=>r(En(e,c));return await Promise.all([(async()=>{const c=await o("cc.dat"),a=new Int16Array(c);n.loadConnectionCosts(a)})(),(async()=>{const[c,a]=await Promise.all(["base.dat","check.dat"].map(o));n.loadTrie(new Uint8Array(c),new Uint8Array(a))})(),(async()=>{const c=await Promise.all(["unk.dat","unk_pos.dat","unk_map.dat","unk_char.dat","unk_compat.dat","unk_invoke.dat"].map(o)),a=new Uint8Array(c[0]),k=new Uint8Array(c[1]),v=new Uint8Array(c[2]),x=new Uint8Array(c[3]),K=new Uint32Array(c[4]),j=new Uint8Array(c[5]);n.loadUnknownDictionaries(a,k,v,x,K,j)})()]),n}}function Rn(t){return new Promise((n,e)=>{Nn(new Uint8Array(t),{consume:!0},function(r,o){r?e(r):n(o.buffer)})})}class Hn extends Fn{async loadArrayBuffer(n){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);const r=await e.arrayBuffer();return await Rn(r)}}function yn(t){t.dicPath==null?this.dic_path="dict/":this.dic_path=t.dicPath}yn.prototype.build=function(t){new Hn(this.dic_path).load().then(n=>t(null,new mt(n))).catch(n=>t(n,null))};function Ht(){this.lines=0,this.connection_cost=null}Ht.prototype.putLine=function(t){if(this.lines===0){const c=t.split(" "),a=c[0],k=c[1];if(a<0||k<0)throw"Parse error of matrix.def";return this.connection_cost=new ln(a,k),this.lines++,this}const n=t.split(" ");if(n.length!==3)return this;const e=parseInt(n[0]),r=parseInt(n[1]),o=parseInt(n[2]);if(e<0||r<0||!isFinite(e)||!isFinite(r)||this.connection_cost.forward_dimension<=e||this.connection_cost.backward_dimension<=r)throw"Parse error of matrix.def";return this.connection_cost.put(e,r,o),this.lines++,this},Ht.prototype.build=function(){return this.connection_cost};const Ln=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,Mn=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,Dn=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;function Lt(){this.char_def=new rt,this.char_def.invoke_definition_map=new ht,this.character_category_definition=[],this.category_mapping=[]}Lt.prototype.putLine=function(t){const n=Ln.exec(t);if(n!=null){const o=this.character_category_definition.length,c=rt.parseCharCategory(o,n);if(c==null)return;this.character_category_definition.push(c);return}const e=Mn.exec(t);if(e!=null){const o=rt.parseCategoryMapping(e);this.category_mapping.push(o)}const r=Dn.exec(t);if(r!=null){const o=rt.parseRangeCategoryMapping(r);this.category_mapping.push(o)}},Lt.prototype.build=function(){return this.char_def.invoke_definition_map.init(this.character_category_definition),this.char_def.initCategoryMappings(this.category_mapping),this.char_def};function ct(){this.tid_entries=[],this.unk_entries=[],this.cc_builder=new Ht,this.cd_builder=new Lt}ct.prototype.addTokenInfoDictionary=function(t){const n=t.split(",");return this.tid_entries.push(n),this},ct.prototype.putCostMatrixLine=function(t){return this.cc_builder.putLine(t),this},ct.prototype.putCharDefLine=function(t){return this.cd_builder.putLine(t),this},ct.prototype.putUnkDefLine=function(t){return this.unk_entries.push(t.split(",")),this},ct.prototype.build=function(){const t=this.buildTokenInfoDictionary(),n=this.buildUnknownDictionary();return new wt(t.trie,t.token_info_dictionary,this.cc_builder.build(),n)},ct.prototype.buildTokenInfoDictionary=function(){const t=new at,n=t.buildDictionary(this.tid_entries),e=this.buildDoubleArray();for(const r in n){const o=n[r],c=e.lookup(o);t.addMapping(c,r)}return{trie:e,token_info_dictionary:t}},ct.prototype.buildUnknownDictionary=function(){const t=new pt,n=t.buildDictionary(this.unk_entries),e=this.cd_builder.build();t.characterDefinition(e);for(const r in n){const o=n[r],c=e.invoke_definition_map.lookup(o);t.addMapping(c,r)}return t},ct.prototype.buildDoubleArray=function(){let t=0;const n=this.tid_entries.map(function(e){return{k:e[0],v:t++}});return Ft.builder(1024*1024).build(n)};const dn={builder:function(t){return new yn(t)},dictionaryBuilder:function(){return new ct}};function Tt(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var gn={exports:{}};(function(t,n){(function(e){t.exports=e()})(function(){return function(){function e(r,o,c){function a(x,K){if(!o[x]){if(!r[x]){var j=typeof Tt=="function"&&Tt;if(!K&&j)return j(x,!0);if(k)return k(x,!0);var U=new Error("Cannot find module '"+x+"'");throw U.code="MODULE_NOT_FOUND",U}var P=o[x]={exports:{}};r[x][0].call(P.exports,function(L){var H=r[x][1][L];return a(H||L)},P,P.exports,e,r,o,c)}return o[x].exports}for(var k=typeof Tt=="function"&&Tt,v=0;v<c.length;v++)a(c[v]);return a}return e}()({1:[function(e,r,o){r.exports=e("regenerator-runtime")},{"regenerator-runtime":2}],2:[function(e,r,o){var c=function(a){var k=Object.prototype,v=k.hasOwnProperty,x,K=typeof Symbol=="function"?Symbol:{},j=K.iterator||"@@iterator",U=K.asyncIterator||"@@asyncIterator",P=K.toStringTag||"@@toStringTag";function L(y,h,f){return Object.defineProperty(y,h,{value:f,enumerable:!0,configurable:!0,writable:!0}),y[h]}try{L({},"")}catch{L=function(y,h,f){return y[h]=f}}function H(y,h,f,C){var O=h&&h.prototype instanceof u?h:u,E=Object.create(O.prototype),z=new b(C||[]);return E._invoke=st(y,f,z),E}a.wrap=H;function M(y,h,f){try{return{type:"normal",arg:y.call(h,f)}}catch(C){return{type:"throw",arg:C}}}var I="suspendedStart",d="suspendedYield",w="executing",m="completed",l={};function u(){}function g(){}function p(){}var s={};s[j]=function(){return this};var S=Object.getPrototypeOf,A=S&&S(S(B([])));A&&A!==k&&v.call(A,j)&&(s=A);var F=p.prototype=u.prototype=Object.create(s);g.prototype=F.constructor=p,p.constructor=g,g.displayName=L(p,P,"GeneratorFunction");function D(y){["next","throw","return"].forEach(function(h){L(y,h,function(f){return this._invoke(h,f)})})}a.isGeneratorFunction=function(y){var h=typeof y=="function"&&y.constructor;return h?h===g||(h.displayName||h.name)==="GeneratorFunction":!1},a.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,p):(y.__proto__=p,L(y,P,"GeneratorFunction")),y.prototype=Object.create(F),y},a.awrap=function(y){return{__await:y}};function G(y,h){function f(E,z,R,$){var q=M(y[E],y,z);if(q.type==="throw")$(q.arg);else{var V=q.arg,X=V.value;return X&&typeof X=="object"&&v.call(X,"__await")?h.resolve(X.__await).then(function(nt){f("next",nt,R,$)},function(nt){f("throw",nt,R,$)}):h.resolve(X).then(function(nt){V.value=nt,R(V)},function(nt){return f("throw",nt,R,$)})}}var C;function O(E,z){function R(){return new h(function($,q){f(E,z,$,q)})}return C=C?C.then(R,R):R()}this._invoke=O}D(G.prototype),G.prototype[U]=function(){return this},a.AsyncIterator=G,a.async=function(y,h,f,C,O){O===void 0&&(O=Promise);var E=new G(H(y,h,f,C),O);return a.isGeneratorFunction(h)?E:E.next().then(function(z){return z.done?z.value:E.next()})};function st(y,h,f){var C=I;return function(O,E){if(C===w)throw new Error("Generator is already running");if(C===m){if(O==="throw")throw E;return tt()}for(f.method=O,f.arg=E;;){var z=f.delegate;if(z){var R=i(z,f);if(R){if(R===l)continue;return R}}if(f.method==="next")f.sent=f._sent=f.arg;else if(f.method==="throw"){if(C===I)throw C=m,f.arg;f.dispatchException(f.arg)}else f.method==="return"&&f.abrupt("return",f.arg);C=w;var $=M(y,h,f);if($.type==="normal"){if(C=f.done?m:d,$.arg===l)continue;return{value:$.arg,done:f.done}}else $.type==="throw"&&(C=m,f.method="throw",f.arg=$.arg)}}}function i(y,h){var f=y.iterator[h.method];if(f===x){if(h.delegate=null,h.method==="throw"){if(y.iterator.return&&(h.method="return",h.arg=x,i(y,h),h.method==="throw"))return l;h.method="throw",h.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var C=M(f,y.iterator,h.arg);if(C.type==="throw")return h.method="throw",h.arg=C.arg,h.delegate=null,l;var O=C.arg;if(!O)return h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,l;if(O.done)h[y.resultName]=O.value,h.next=y.nextLoc,h.method!=="return"&&(h.method="next",h.arg=x);else return O;return h.delegate=null,l}D(F),L(F,P,"Generator"),F[j]=function(){return this},F.toString=function(){return"[object Generator]"};function _(y){var h={tryLoc:y[0]};1 in y&&(h.catchLoc=y[1]),2 in y&&(h.finallyLoc=y[2],h.afterLoc=y[3]),this.tryEntries.push(h)}function T(y){var h=y.completion||{};h.type="normal",delete h.arg,y.completion=h}function b(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(_,this),this.reset(!0)}a.keys=function(y){var h=[];for(var f in y)h.push(f);return h.reverse(),function C(){for(;h.length;){var O=h.pop();if(O in y)return C.value=O,C.done=!1,C}return C.done=!0,C}};function B(y){if(y){var h=y[j];if(h)return h.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var f=-1,C=function O(){for(;++f<y.length;)if(v.call(y,f))return O.value=y[f],O.done=!1,O;return O.value=x,O.done=!0,O};return C.next=C}}return{next:tt}}a.values=B;function tt(){return{value:x,done:!0}}return b.prototype={constructor:b,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=x,this.done=!1,this.delegate=null,this.method="next",this.arg=x,this.tryEntries.forEach(T),!y)for(var h in this)h.charAt(0)==="t"&&v.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=x)},stop:function(){this.done=!0;var y=this.tryEntries[0],h=y.completion;if(h.type==="throw")throw h.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var h=this;function f($,q){return E.type="throw",E.arg=y,h.next=$,q&&(h.method="next",h.arg=x),!!q}for(var C=this.tryEntries.length-1;C>=0;--C){var O=this.tryEntries[C],E=O.completion;if(O.tryLoc==="root")return f("end");if(O.tryLoc<=this.prev){var z=v.call(O,"catchLoc"),R=v.call(O,"finallyLoc");if(z&&R){if(this.prev<O.catchLoc)return f(O.catchLoc,!0);if(this.prev<O.finallyLoc)return f(O.finallyLoc)}else if(z){if(this.prev<O.catchLoc)return f(O.catchLoc,!0)}else if(R){if(this.prev<O.finallyLoc)return f(O.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(y,h){for(var f=this.tryEntries.length-1;f>=0;--f){var C=this.tryEntries[f];if(C.tryLoc<=this.prev&&v.call(C,"finallyLoc")&&this.prev<C.finallyLoc){var O=C;break}}O&&(y==="break"||y==="continue")&&O.tryLoc<=h&&h<=O.finallyLoc&&(O=null);var E=O?O.completion:{};return E.type=y,E.arg=h,O?(this.method="next",this.next=O.finallyLoc,l):this.complete(E)},complete:function(y,h){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&h&&(this.next=h),l},finish:function(y){for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h];if(f.finallyLoc===y)return this.complete(f.completion,f.afterLoc),T(f),l}},catch:function(y){for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h];if(f.tryLoc===y){var C=f.completion;if(C.type==="throw"){var O=C.arg;T(f)}return O}}throw new Error("illegal catch attempt")},delegateYield:function(y,h,f){return this.delegate={iterator:B(y),resultName:h,nextLoc:f},this.method==="next"&&(this.arg=x),l}},a}(typeof r=="object"?r.exports:{});try{regeneratorRuntime=c}catch{Function("r","regeneratorRuntime = r")(c)}},{}],3:[function(e,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=k(e("@babel/runtime/regenerator")),a=e("./util");function k(I){return I&&I.__esModule?I:{default:I}}function v(I){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?v=function(d){return typeof d}:v=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},v(I)}function x(I,d,w,m,l,u,g){try{var p=I[u](g),s=p.value}catch(S){w(S);return}p.done?d(s):Promise.resolve(s).then(m,l)}function K(I){return function(){var d=this,w=arguments;return new Promise(function(m,l){var u=I.apply(d,w);function g(s){x(u,m,l,g,p,"next",s)}function p(s){x(u,m,l,g,p,"throw",s)}g(void 0)})}}function j(I,d){if(!(I instanceof d))throw new TypeError("Cannot call a class as a function")}function U(I,d){for(var w=0;w<d.length;w++){var m=d[w];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(I,m.key,m)}}function P(I,d,w){return d&&U(I.prototype,d),I}var L=function(){function I(){j(this,I),this._analyzer=null}return P(I,[{key:"init",value:function(){var d=K(c.default.mark(function m(l){return c.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(!l||v(l)!=="object"||typeof l.init!="function"||typeof l.parse!="function")){u.next=4;break}throw new Error("Invalid initialization parameter.");case 4:if(this._analyzer!=null){u.next=10;break}return u.next=7,l.init();case 7:this._analyzer=l,u.next=11;break;case 10:throw new Error("Kuroshiro has already been initialized.");case 11:case"end":return u.stop()}},m,this)}));function w(m){return d.apply(this,arguments)}return w}()},{key:"convert",value:function(){var d=K(c.default.mark(function m(l,u){var g,p,s,S,A,F,D,G,st,i,_,T,b,B,tt,y,h,f,C,O,E,z,R,$,q,V,X,nt,yt,bt,dt,gt;return c.default.wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(u=u||{},u.to=u.to||"hiragana",u.mode=u.mode||"normal",u.romajiSystem=u.romajiSystem||a.ROMANIZATION_SYSTEM.HEPBURN,u.delimiter_start=u.delimiter_start||"(",u.delimiter_end=u.delimiter_end||")",l=l||"",["hiragana","katakana","romaji"].indexOf(u.to)!==-1){N.next=9;break}throw new Error("Invalid Target Syllabary.");case 9:if(["normal","spaced","okurigana","furigana"].indexOf(u.mode)!==-1){N.next=11;break}throw new Error("Invalid Conversion Mode.");case 11:if(g=Object.keys(a.ROMANIZATION_SYSTEM).map(function(et){return a.ROMANIZATION_SYSTEM[et]}),g.indexOf(u.romajiSystem)!==-1){N.next=14;break}throw new Error("Invalid Romanization System.");case 14:return N.next=16,this._analyzer.parse(l);case 16:if(p=N.sent,s=(0,a.patchTokens)(p),!(u.mode==="normal"||u.mode==="spaced")){N.next=36;break}N.t0=u.to,N.next=N.t0==="katakana"?22:N.t0==="romaji"?25:N.t0==="hiragana"?29:33;break;case 22:if(u.mode!=="normal"){N.next=24;break}return N.abrupt("return",s.map(function(et){return et.reading}).join(""));case 24:return N.abrupt("return",s.map(function(et){return et.reading}).join(" "));case 25:if(S=function(et){var Mt;return(0,a.hasJapanese)(et.surface_form)?Mt=et.pronunciation||et.reading:Mt=et.surface_form,(0,a.toRawRomaji)(Mt,u.romajiSystem)},u.mode!=="normal"){N.next=28;break}return N.abrupt("return",s.map(S).join(""));case 28:return N.abrupt("return",s.map(S).join(" "));case 29:for(A=0;A<s.length;A++)if((0,a.hasKanji)(s[A].surface_form))if(!(0,a.hasKatakana)(s[A].surface_form))s[A].reading=(0,a.toRawHiragana)(s[A].reading);else{for(s[A].reading=(0,a.toRawHiragana)(s[A].reading),F="",D="",G=0;G<s[A].surface_form.length;G++)(0,a.isKanji)(s[A].surface_form[G])?D+="(.*)":D+=(0,a.isKatakana)(s[A].surface_form[G])?(0,a.toRawHiragana)(s[A].surface_form[G]):s[A].surface_form[G];if(st=new RegExp(D),i=st.exec(s[A].reading),i){for(_=0,T=0;T<s[A].surface_form.length;T++)(0,a.isKanji)(s[A].surface_form[T])?(F+=i[_+1],_++):F+=s[A].surface_form[T];s[A].reading=F}}else s[A].reading=s[A].surface_form;if(u.mode!=="normal"){N.next=32;break}return N.abrupt("return",s.map(function(et){return et.reading}).join(""));case 32:return N.abrupt("return",s.map(function(et){return et.reading}).join(" "));case 33:throw new Error("Unknown option.to param");case 34:N.next=73;break;case 36:if(!(u.mode==="okurigana"||u.mode==="furigana")){N.next=73;break}b=[],B=0;case 39:if(!(B<s.length)){N.next=62;break}tt=(0,a.getStrType)(s[B].surface_form),N.t1=tt,N.next=N.t1===0?44:N.t1===1?46:N.t1===2?54:N.t1===3?56:58;break;case 44:return b.push([s[B].surface_form,1,(0,a.toRawHiragana)(s[B].reading),s[B].pronunciation||s[B].reading]),N.abrupt("break",59);case 46:for(y="",h=!1,f=[],C=0;C<s[B].surface_form.length;C++)(0,a.isKanji)(s[B].surface_form[C])?h?f[f.length-1]+=s[B].surface_form[C]:(h=!0,y+="(.+)",f.push(s[B].surface_form[C])):(h=!1,f.push(s[B].surface_form[C]),y+=(0,a.isKatakana)(s[B].surface_form[C])?(0,a.toRawHiragana)(s[B].surface_form[C]):s[B].surface_form[C]);if(O=new RegExp("^".concat(y,"$")),E=O.exec((0,a.toRawHiragana)(s[B].reading)),E)for(z=1,R=0;R<f.length;R++)(0,a.isKanji)(f[R][0])?(b.push([f[R],1,E[z],(0,a.toRawKatakana)(E[z])]),z+=1):b.push([f[R],2,(0,a.toRawHiragana)(f[R]),(0,a.toRawKatakana)(f[R])]);else b.push([s[B].surface_form,1,(0,a.toRawHiragana)(s[B].reading),s[B].pronunciation||s[B].reading]);return N.abrupt("break",59);case 54:for($=0;$<s[B].surface_form.length;$++)b.push([s[B].surface_form[$],2,(0,a.toRawHiragana)(s[B].reading[$]),s[B].pronunciation&&s[B].pronunciation[$]||s[B].reading[$]]);return N.abrupt("break",59);case 56:for(q=0;q<s[B].surface_form.length;q++)b.push([s[B].surface_form[q],3,s[B].surface_form[q],s[B].surface_form[q]]);return N.abrupt("break",59);case 58:throw new Error("Unknown strType");case 59:B++,N.next=39;break;case 62:V="",N.t2=u.to,N.next=N.t2==="katakana"?66:N.t2==="romaji"?68:N.t2==="hiragana"?70:72;break;case 66:if(u.mode==="okurigana")for(X=0;X<b.length;X++)b[X][1]!==1?V+=b[X][0]:V+=b[X][0]+u.delimiter_start+(0,a.toRawKatakana)(b[X][2])+u.delimiter_end;else for(nt=0;nt<b.length;nt++)b[nt][1]!==1?V+=b[nt][0]:V+="<ruby>".concat(b[nt][0],"<rp>").concat(u.delimiter_start,"</rp><rt>").concat((0,a.toRawKatakana)(b[nt][2]),"</rt><rp>").concat(u.delimiter_end,"</rp></ruby>");return N.abrupt("return",V);case 68:if(u.mode==="okurigana")for(yt=0;yt<b.length;yt++)b[yt][1]!==1?V+=b[yt][0]:V+=b[yt][0]+u.delimiter_start+(0,a.toRawRomaji)(b[yt][3],u.romajiSystem)+u.delimiter_end;else{for(V+="<ruby>",bt=0;bt<b.length;bt++)V+="".concat(b[bt][0],"<rp>").concat(u.delimiter_start,"</rp><rt>").concat((0,a.toRawRomaji)(b[bt][3],u.romajiSystem),"</rt><rp>").concat(u.delimiter_end,"</rp>");V+="</ruby>"}return N.abrupt("return",V);case 70:if(u.mode==="okurigana")for(dt=0;dt<b.length;dt++)b[dt][1]!==1?V+=b[dt][0]:V+=b[dt][0]+u.delimiter_start+b[dt][2]+u.delimiter_end;else for(gt=0;gt<b.length;gt++)b[gt][1]!==1?V+=b[gt][0]:V+="<ruby>".concat(b[gt][0],"<rp>").concat(u.delimiter_start,"</rp><rt>").concat(b[gt][2],"</rt><rp>").concat(u.delimiter_end,"</rp></ruby>");return N.abrupt("return",V);case 72:throw new Error("Invalid Target Syllabary.");case 73:case"end":return N.stop()}},m,this)}));function w(m,l){return d.apply(this,arguments)}return w}()}]),I}(),H={isHiragana:a.isHiragana,isKatakana:a.isKatakana,isKana:a.isKana,isKanji:a.isKanji,isJapanese:a.isJapanese,hasHiragana:a.hasHiragana,hasKatakana:a.hasKatakana,hasKana:a.hasKana,hasKanji:a.hasKanji,hasJapanese:a.hasJapanese,kanaToHiragna:a.kanaToHiragna,kanaToKatakana:a.kanaToKatakana,kanaToRomaji:a.kanaToRomaji};L.Util=H;var M=L;o.default=M},{"./util":5,"@babel/runtime/regenerator":1}],4:[function(e,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=a(e("./core"));function a(v){return v&&v.__esModule?v:{default:v}}var k=c.default;o.default=k},{"./core":3}],5:[function(e,r,o){Object.defineProperty(o,"__esModule",{value:!0}),o.kanaToRomaji=o.kanaToKatakana=o.kanaToHiragna=o.toRawRomaji=o.toRawKatakana=o.toRawHiragana=o.hasJapanese=o.hasKanji=o.hasKana=o.hasKatakana=o.hasHiragana=o.isJapanese=o.isKanji=o.isKana=o.isKatakana=o.isHiragana=o.patchTokens=o.getStrType=o.ROMANIZATION_SYSTEM=void 0;function c(i){return x(i)||v(i)||k(i)||a()}function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(i,_){if(i){if(typeof i=="string")return K(i,_);var T=Object.prototype.toString.call(i).slice(8,-1);if(T==="Object"&&i.constructor&&(T=i.constructor.name),T==="Map"||T==="Set")return Array.from(i);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return K(i,_)}}function v(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function x(i){if(Array.isArray(i))return K(i)}function K(i,_){(_==null||_>i.length)&&(_=i.length);for(var T=0,b=new Array(_);T<_;T++)b[T]=i[T];return b}var j=-96,U=96,P={NIPPON:"nippon",PASSPORT:"passport",HEPBURN:"hepburn"};o.ROMANIZATION_SYSTEM=P;var L=function(i){return i=i[0],i>="\u3040"&&i<="\u309F"};o.isHiragana=L;var H=function(i){return i=i[0],i>="\u30A0"&&i<="\u30FF"};o.isKatakana=H;var M=function(i){return L(i)||H(i)};o.isKana=M;var I=function(i){return i=i[0],i>="\u4E00"&&i<="\u9FCF"||i>="\uF900"&&i<="\uFAFF"||i>="\u3400"&&i<="\u4DBF"};o.isKanji=I;var d=function(i){return M(i)||I(i)};o.isJapanese=d;var w=function(i){for(var _=0;_<i.length;_++)if(L(i[_]))return!0;return!1};o.hasHiragana=w;var m=function(i){for(var _=0;_<i.length;_++)if(H(i[_]))return!0;return!1};o.hasKatakana=m;var l=function(i){for(var _=0;_<i.length;_++)if(M(i[_]))return!0;return!1};o.hasKana=l;var u=function(i){for(var _=0;_<i.length;_++)if(I(i[_]))return!0;return!1};o.hasKanji=u;var g=function(i){for(var _=0;_<i.length;_++)if(d(i[_]))return!0;return!1};o.hasJapanese=g;var p=function(i){return c(i).map(function(_){return _>"\u30A0"&&_<"\u30F7"?String.fromCharCode(_.charCodeAt(0)+j):_}).join("")};o.toRawHiragana=p;var s=function(i){return c(i).map(function(_){return _>"\u3040"&&_<"\u3097"?String.fromCharCode(_.charCodeAt(0)+U):_}).join("")};o.toRawKatakana=s;var S=function(i,_){_=_||P.HEPBURN;var T={nippon:{"\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\uFF10":"0","\uFF01":"!","\u201C":'"',"\u201D":'"',"\uFF03":"#","\uFF04":"$","\uFF05":"%","\uFF06":"&","\u2019":"'","\uFF08":"(","\uFF09":")","\uFF1D":"=","\uFF5E":"~","\uFF5C":"|","\uFF20":"@","\u2018":"`","\uFF0B":"+","\uFF0A":"*","\uFF1B":";","\uFF1A":":","\uFF1C":"<","\uFF1E":">","\u3001":",","\u3002":".","\uFF0F":"/","\uFF1F":"?","\uFF3F":"_","\u30FB":"\uFF65","\u300C":'"',"\u300D":'"',"\uFF5B":"{","\uFF5D":"}","\uFFE5":"\\","\uFF3E":"^",\u3042:"a",\u3044:"i",\u3046:"u",\u3048:"e",\u304A:"o",\u30A2:"a",\u30A4:"i",\u30A6:"u",\u30A8:"e",\u30AA:"o",\u304B:"ka",\u304D:"ki",\u304F:"ku",\u3051:"ke",\u3053:"ko",\u30AB:"ka",\u30AD:"ki",\u30AF:"ku",\u30B1:"ke",\u30B3:"ko",\u3055:"sa",\u3057:"si",\u3059:"su",\u305B:"se",\u305D:"so",\u30B5:"sa",\u30B7:"si",\u30B9:"su",\u30BB:"se",\u30BD:"so",\u305F:"ta",\u3061:"ti",\u3064:"tu",\u3066:"te",\u3068:"to",\u30BF:"ta",\u30C1:"ti",\u30C4:"tu",\u30C6:"te",\u30C8:"to",\u306A:"na",\u306B:"ni",\u306C:"nu",\u306D:"ne",\u306E:"no",\u30CA:"na",\u30CB:"ni",\u30CC:"nu",\u30CD:"ne",\u30CE:"no",\u306F:"ha",\u3072:"hi",\u3075:"hu",\u3078:"he",\u307B:"ho",\u30CF:"ha",\u30D2:"hi",\u30D5:"hu",\u30D8:"he",\u30DB:"ho",\u307E:"ma",\u307F:"mi",\u3080:"mu",\u3081:"me",\u3082:"mo",\u30DE:"ma",\u30DF:"mi",\u30E0:"mu",\u30E1:"me",\u30E2:"mo",\u3084:"ya",\u3086:"yu",\u3088:"yo",\u30E4:"ya",\u30E6:"yu",\u30E8:"yo",\u3089:"ra",\u308A:"ri",\u308B:"ru",\u308C:"re",\u308D:"ro",\u30E9:"ra",\u30EA:"ri",\u30EB:"ru",\u30EC:"re",\u30ED:"ro",\u308F:"wa",\u3090:"wi",\u3091:"we",\u3092:"wo",\u30EF:"wa",\u30F0:"wi",\u30F1:"we",\u30F2:"wo",\u304C:"ga",\u304E:"gi",\u3050:"gu",\u3052:"ge",\u3054:"go",\u30AC:"ga",\u30AE:"gi",\u30B0:"gu",\u30B2:"ge",\u30B4:"go",\u3056:"za",\u3058:"zi",\u305A:"zu",\u305C:"ze",\u305E:"zo",\u30B6:"za",\u30B8:"zi",\u30BA:"zu",\u30BC:"ze",\u30BE:"zo",\u3060:"da",\u3062:"di",\u3065:"du",\u3067:"de",\u3069:"do",\u30C0:"da",\u30C2:"di",\u30C5:"du",\u30C7:"de",\u30C9:"do",\u3070:"ba",\u3073:"bi",\u3076:"bu",\u3079:"be",\u307C:"bo",\u30D0:"ba",\u30D3:"bi",\u30D6:"bu",\u30D9:"be",\u30DC:"bo",\u3071:"pa",\u3074:"pi",\u3077:"pu",\u307A:"pe",\u307D:"po",\u30D1:"pa",\u30D4:"pi",\u30D7:"pu",\u30DA:"pe",\u30DD:"po",\u304D\u3083:"kya",\u304D\u3085:"kyu",\u304D\u3087:"kyo",\u3057\u3083:"sya",\u3057\u3085:"syu",\u3057\u3087:"syo",\u3061\u3083:"tya",\u3061\u3085:"tyu",\u3061\u3087:"tyo",\u306B\u3083:"nya",\u306B\u3085:"nyu",\u306B\u3087:"nyo",\u3072\u3083:"hya",\u3072\u3085:"hyu",\u3072\u3087:"hyo",\u307F\u3083:"mya",\u307F\u3085:"myu",\u307F\u3087:"myo",\u308A\u3083:"rya",\u308A\u3085:"ryu",\u308A\u3087:"ryo",\u30AD\u30E3:"kya",\u30AD\u30E5:"kyu",\u30AD\u30E7:"kyo",\u30B7\u30E3:"sya",\u30B7\u30E5:"syu",\u30B7\u30E7:"syo",\u30C1\u30E3:"tya",\u30C1\u30E5:"tyu",\u30C1\u30E7:"tyo",\u30CB\u30E3:"nya",\u30CB\u30E5:"nyu",\u30CB\u30E7:"nyo",\u30D2\u30E3:"hya",\u30D2\u30E5:"hyu",\u30D2\u30E7:"hyo",\u30DF\u30E3:"mya",\u30DF\u30E5:"myu",\u30DF\u30E7:"myo",\u30EA\u30E3:"rya",\u30EA\u30E5:"ryu",\u30EA\u30E7:"ryo",\u304E\u3083:"gya",\u304E\u3085:"gyu",\u304E\u3087:"gyo",\u3058\u3083:"zya",\u3058\u3085:"zyu",\u3058\u3087:"zyo",\u3062\u3083:"dya",\u3062\u3085:"dyu",\u3062\u3087:"dyo",\u3073\u3083:"bya",\u3073\u3085:"byu",\u3073\u3087:"byo",\u3074\u3083:"pya",\u3074\u3085:"pyu",\u3074\u3087:"pyo",\u304F\u308E:"kwa",\u3050\u308E:"gwa",\u30AE\u30E3:"gya",\u30AE\u30E5:"gyu",\u30AE\u30E7:"gyo",\u30B8\u30E3:"zya",\u30B8\u30E5:"zyu",\u30B8\u30E7:"zyo",\u30C2\u30E3:"dya",\u30C2\u30E5:"dyu",\u30C2\u30E7:"dyo",\u30D3\u30E3:"bya",\u30D3\u30E5:"byu",\u30D3\u30E7:"byo",\u30D4\u30E3:"pya",\u30D4\u30E5:"pyu",\u30D4\u30E7:"pyo",\u30AF\u30EE:"kwa",\u30B0\u30EE:"gwa",\u3041:"a",\u3043:"i",\u3045:"u",\u3047:"e",\u3049:"o",\u3083:"ya",\u3085:"yu",\u3087:"yo",\u308E:"wa",\u30A1:"a",\u30A3:"i",\u30A5:"u",\u30A7:"e",\u30A9:"o",\u30E3:"ya",\u30E5:"yu",\u30E7:"yo",\u30EE:"wa",\u30F5:"ka",\u30F6:"ke",\u3093:"n",\u30F3:"n","\u3000":" ",\u3044\u3047:"ye",\u304D\u3047:"kye",\u304F\u3043:"kwi",\u304F\u3047:"kwe",\u304F\u3049:"kwo",\u3050\u3043:"gwi",\u3050\u3047:"gwe",\u3050\u3049:"gwo",\u30A4\u30A7:"ye",\u30AD\u30A7:"kya",\u30AF\u30A3:"kwi",\u30AF\u30A7:"kwe",\u30AF\u30A9:"kwo",\u30B0\u30A3:"gwi",\u30B0\u30A7:"gwe",\u30B0\u30A9:"gwo",\u3057\u3047:"sye",\u3058\u3047:"zye",\u3059\u3043:"swi",\u305A\u3043:"zwi",\u3061\u3047:"tye",\u3064\u3041:"twa",\u3064\u3043:"twi",\u3064\u3047:"twe",\u3064\u3049:"two",\u306B\u3047:"nye",\u3072\u3047:"hye",\u3075\u3041:"hwa",\u3075\u3043:"hwi",\u3075\u3047:"hwe",\u3075\u3049:"hwo",\u3075\u3085:"hwyu",\u3075\u3087:"hwyo",\u30B7\u30A7:"sye",\u30B8\u30A7:"zye",\u30B9\u30A3:"swi",\u30BA\u30A3:"zwi",\u30C1\u30A7:"tye",\u30C4\u30A1:"twa",\u30C4\u30A3:"twi",\u30C4\u30A7:"twe",\u30C4\u30A9:"two",\u30CB\u30A7:"nye",\u30D2\u30A7:"hye",\u30D5\u30A1:"hwa",\u30D5\u30A3:"hwi",\u30D5\u30A7:"hwe",\u30D5\u30A9:"hwo",\u30D5\u30E5:"hwyu",\u30D5\u30E7:"hwyo"},passport:{"\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\uFF10":"0","\uFF01":"!","\u201C":'"',"\u201D":'"',"\uFF03":"#","\uFF04":"$","\uFF05":"%","\uFF06":"&","\u2019":"'","\uFF08":"(","\uFF09":")","\uFF1D":"=","\uFF5E":"~","\uFF5C":"|","\uFF20":"@","\u2018":"`","\uFF0B":"+","\uFF0A":"*","\uFF1B":";","\uFF1A":":","\uFF1C":"<","\uFF1E":">","\u3001":",","\u3002":".","\uFF0F":"/","\uFF1F":"?","\uFF3F":"_","\u30FB":"\uFF65","\u300C":'"',"\u300D":'"',"\uFF5B":"{","\uFF5D":"}","\uFFE5":"\\","\uFF3E":"^",\u3042:"a",\u3044:"i",\u3046:"u",\u3048:"e",\u304A:"o",\u30A2:"a",\u30A4:"i",\u30A6:"u",\u30A8:"e",\u30AA:"o",\u304B:"ka",\u304D:"ki",\u304F:"ku",\u3051:"ke",\u3053:"ko",\u30AB:"ka",\u30AD:"ki",\u30AF:"ku",\u30B1:"ke",\u30B3:"ko",\u3055:"sa",\u3057:"shi",\u3059:"su",\u305B:"se",\u305D:"so",\u30B5:"sa",\u30B7:"shi",\u30B9:"su",\u30BB:"se",\u30BD:"so",\u305F:"ta",\u3061:"chi",\u3064:"tsu",\u3066:"te",\u3068:"to",\u30BF:"ta",\u30C1:"chi",\u30C4:"tsu",\u30C6:"te",\u30C8:"to",\u306A:"na",\u306B:"ni",\u306C:"nu",\u306D:"ne",\u306E:"no",\u30CA:"na",\u30CB:"ni",\u30CC:"nu",\u30CD:"ne",\u30CE:"no",\u306F:"ha",\u3072:"hi",\u3075:"fu",\u3078:"he",\u307B:"ho",\u30CF:"ha",\u30D2:"hi",\u30D5:"fu",\u30D8:"he",\u30DB:"ho",\u307E:"ma",\u307F:"mi",\u3080:"mu",\u3081:"me",\u3082:"mo",\u30DE:"ma",\u30DF:"mi",\u30E0:"mu",\u30E1:"me",\u30E2:"mo",\u3084:"ya",\u3086:"yu",\u3088:"yo",\u30E4:"ya",\u30E6:"yu",\u30E8:"yo",\u3089:"ra",\u308A:"ri",\u308B:"ru",\u308C:"re",\u308D:"ro",\u30E9:"ra",\u30EA:"ri",\u30EB:"ru",\u30EC:"re",\u30ED:"ro",\u308F:"wa",\u3090:"i",\u3091:"e",\u3092:"o",\u30EF:"wa",\u30F0:"i",\u30F1:"e",\u30F2:"o",\u304C:"ga",\u304E:"gi",\u3050:"gu",\u3052:"ge",\u3054:"go",\u30AC:"ga",\u30AE:"gi",\u30B0:"gu",\u30B2:"ge",\u30B4:"go",\u3056:"za",\u3058:"ji",\u305A:"zu",\u305C:"ze",\u305E:"zo",\u30B6:"za",\u30B8:"ji",\u30BA:"zu",\u30BC:"ze",\u30BE:"zo",\u3060:"da",\u3062:"ji",\u3065:"zu",\u3067:"de",\u3069:"do",\u30C0:"da",\u30C2:"ji",\u30C5:"zu",\u30C7:"de",\u30C9:"do",\u3070:"ba",\u3073:"bi",\u3076:"bu",\u3079:"be",\u307C:"bo",\u30D0:"ba",\u30D3:"bi",\u30D6:"bu",\u30D9:"be",\u30DC:"bo",\u3071:"pa",\u3074:"pi",\u3077:"pu",\u307A:"pe",\u307D:"po",\u30D1:"pa",\u30D4:"pi",\u30D7:"pu",\u30DA:"pe",\u30DD:"po",\u304D\u3083:"kya",\u304D\u3085:"kyu",\u304D\u3087:"kyo",\u3057\u3083:"sha",\u3057\u3085:"shu",\u3057\u3087:"sho",\u3061\u3083:"cha",\u3061\u3085:"chu",\u3061\u3087:"cho",\u306B\u3083:"nya",\u306B\u3085:"nyu",\u306B\u3087:"nyo",\u3072\u3083:"hya",\u3072\u3085:"hyu",\u3072\u3087:"hyo",\u307F\u3083:"mya",\u307F\u3085:"myu",\u307F\u3087:"myo",\u308A\u3083:"rya",\u308A\u3085:"ryu",\u308A\u3087:"ryo",\u30AD\u30E3:"kya",\u30AD\u30E5:"kyu",\u30AD\u30E7:"kyo",\u30B7\u30E3:"sha",\u30B7\u30E5:"shu",\u30B7\u30E7:"sho",\u30C1\u30E3:"cha",\u30C1\u30E5:"chu",\u30C1\u30E7:"cho",\u30CB\u30E3:"nya",\u30CB\u30E5:"nyu",\u30CB\u30E7:"nyo",\u30D2\u30E3:"hya",\u30D2\u30E5:"hyu",\u30D2\u30E7:"hyo",\u30DF\u30E3:"mya",\u30DF\u30E5:"myu",\u30DF\u30E7:"myo",\u30EA\u30E3:"rya",\u30EA\u30E5:"ryu",\u30EA\u30E7:"ryo",\u304E\u3083:"gya",\u304E\u3085:"gyu",\u304E\u3087:"gyo",\u3058\u3083:"ja",\u3058\u3085:"ju",\u3058\u3087:"jo",\u3062\u3083:"ja",\u3062\u3085:"ju",\u3062\u3087:"jo",\u3073\u3083:"bya",\u3073\u3085:"byu",\u3073\u3087:"byo",\u3074\u3083:"pya",\u3074\u3085:"pyu",\u3074\u3087:"pyo",\u30AE\u30E3:"gya",\u30AE\u30E5:"gyu",\u30AE\u30E7:"gyo",\u30B8\u30E3:"ja",\u30B8\u30E5:"ju",\u30B8\u30E7:"jo",\u30C2\u30E3:"ja",\u30C2\u30E5:"ju",\u30C2\u30E7:"jo",\u30D3\u30E3:"bya",\u30D3\u30E5:"byu",\u30D3\u30E7:"byo",\u30D4\u30E3:"pya",\u30D4\u30E5:"pyu",\u30D4\u30E7:"pyo",\u3041:"a",\u3043:"i",\u3045:"u",\u3047:"e",\u3049:"o",\u3083:"ya",\u3085:"yu",\u3087:"yo",\u308E:"wa",\u30A1:"a",\u30A3:"i",\u30A5:"u",\u30A7:"e",\u30A9:"o",\u30E3:"ya",\u30E5:"yu",\u30E7:"yo",\u30EE:"wa",\u30F5:"ka",\u30F6:"ke",\u3093:"n",\u30F3:"n","\u3000":" ",\u30F4:"b"},hepburn:{"\uFF11":"1","\uFF12":"2","\uFF13":"3","\uFF14":"4","\uFF15":"5","\uFF16":"6","\uFF17":"7","\uFF18":"8","\uFF19":"9","\uFF10":"0","\uFF01":"!","\u201C":'"',"\u201D":'"',"\uFF03":"#","\uFF04":"$","\uFF05":"%","\uFF06":"&","\u2019":"'","\uFF08":"(","\uFF09":")","\uFF1D":"=","\uFF5E":"~","\uFF5C":"|","\uFF20":"@","\u2018":"`","\uFF0B":"+","\uFF0A":"*","\uFF1B":";","\uFF1A":":","\uFF1C":"<","\uFF1E":">","\u3001":",","\u3002":".","\uFF0F":"/","\uFF1F":"?","\uFF3F":"_","\u30FB":"\uFF65","\u300C":'"',"\u300D":'"',"\uFF5B":"{","\uFF5D":"}","\uFFE5":"\\","\uFF3E":"^",\u3042:"a",\u3044:"i",\u3046:"u",\u3048:"e",\u304A:"o",\u30A2:"a",\u30A4:"i",\u30A6:"u",\u30A8:"e",\u30AA:"o",\u304B:"ka",\u304D:"ki",\u304F:"ku",\u3051:"ke",\u3053:"ko",\u30AB:"ka",\u30AD:"ki",\u30AF:"ku",\u30B1:"ke",\u30B3:"ko",\u3055:"sa",\u3057:"shi",\u3059:"su",\u305B:"se",\u305D:"so",\u30B5:"sa",\u30B7:"shi",\u30B9:"su",\u30BB:"se",\u30BD:"so",\u305F:"ta",\u3061:"chi",\u3064:"tsu",\u3066:"te",\u3068:"to",\u30BF:"ta",\u30C1:"chi",\u30C4:"tsu",\u30C6:"te",\u30C8:"to",\u306A:"na",\u306B:"ni",\u306C:"nu",\u306D:"ne",\u306E:"no",\u30CA:"na",\u30CB:"ni",\u30CC:"nu",\u30CD:"ne",\u30CE:"no",\u306F:"ha",\u3072:"hi",\u3075:"fu",\u3078:"he",\u307B:"ho",\u30CF:"ha",\u30D2:"hi",\u30D5:"fu",\u30D8:"he",\u30DB:"ho",\u307E:"ma",\u307F:"mi",\u3080:"mu",\u3081:"me",\u3082:"mo",\u30DE:"ma",\u30DF:"mi",\u30E0:"mu",\u30E1:"me",\u30E2:"mo",\u3084:"ya",\u3086:"yu",\u3088:"yo",\u30E4:"ya",\u30E6:"yu",\u30E8:"yo",\u3089:"ra",\u308A:"ri",\u308B:"ru",\u308C:"re",\u308D:"ro",\u30E9:"ra",\u30EA:"ri",\u30EB:"ru",\u30EC:"re",\u30ED:"ro",\u308F:"wa",\u3090:"i",\u3091:"e",\u3092:"o",\u30EF:"wa",\u30F0:"i",\u30F1:"e",\u30F2:"o",\u304C:"ga",\u304E:"gi",\u3050:"gu",\u3052:"ge",\u3054:"go",\u30AC:"ga",\u30AE:"gi",\u30B0:"gu",\u30B2:"ge",\u30B4:"go",\u3056:"za",\u3058:"ji",\u305A:"zu",\u305C:"ze",\u305E:"zo",\u30B6:"za",\u30B8:"ji",\u30BA:"zu",\u30BC:"ze",\u30BE:"zo",\u3060:"da",\u3062:"ji",\u3065:"zu",\u3067:"de",\u3069:"do",\u30C0:"da",\u30C2:"ji",\u30C5:"zu",\u30C7:"de",\u30C9:"do",\u3070:"ba",\u3073:"bi",\u3076:"bu",\u3079:"be",\u307C:"bo",\u30D0:"ba",\u30D3:"bi",\u30D6:"bu",\u30D9:"be",\u30DC:"bo",\u3071:"pa",\u3074:"pi",\u3077:"pu",\u307A:"pe",\u307D:"po",\u30D1:"pa",\u30D4:"pi",\u30D7:"pu",\u30DA:"pe",\u30DD:"po",\u304D\u3083:"kya",\u304D\u3085:"kyu",\u304D\u3087:"kyo",\u3057\u3083:"sha",\u3057\u3085:"shu",\u3057\u3087:"sho",\u3061\u3083:"cha",\u3061\u3085:"chu",\u3061\u3087:"cho",\u306B\u3083:"nya",\u306B\u3085:"nyu",\u306B\u3087:"nyo",\u3072\u3083:"hya",\u3072\u3085:"hyu",\u3072\u3087:"hyo",\u307F\u3083:"mya",\u307F\u3085:"myu",\u307F\u3087:"myo",\u308A\u3083:"rya",\u308A\u3085:"ryu",\u308A\u3087:"ryo",\u30AD\u30E3:"kya",\u30AD\u30E5:"kyu",\u30AD\u30E7:"kyo",\u30B7\u30E3:"sha",\u30B7\u30E5:"shu",\u30B7\u30E7:"sho",\u30C1\u30E3:"cha",\u30C1\u30E5:"chu",\u30C1\u30E7:"cho",\u30CB\u30E3:"nya",\u30CB\u30E5:"nyu",\u30CB\u30E7:"nyo",\u30D2\u30E3:"hya",\u30D2\u30E5:"hyu",\u30D2\u30E7:"hyo",\u30DF\u30E3:"mya",\u30DF\u30E5:"myu",\u30DF\u30E7:"myo",\u30EA\u30E3:"rya",\u30EA\u30E5:"ryu",\u30EA\u30E7:"ryo",\u304E\u3083:"gya",\u304E\u3085:"gyu",\u304E\u3087:"gyo",\u3058\u3083:"ja",\u3058\u3085:"ju",\u3058\u3087:"jo",\u3062\u3083:"ja",\u3062\u3085:"ju",\u3062\u3087:"jo",\u3073\u3083:"bya",\u3073\u3085:"byu",\u3073\u3087:"byo",\u3074\u3083:"pya",\u3074\u3085:"pyu",\u3074\u3087:"pyo",\u30AE\u30E3:"gya",\u30AE\u30E5:"gyu",\u30AE\u30E7:"gyo",\u30B8\u30E3:"ja",\u30B8\u30E5:"ju",\u30B8\u30E7:"jo",\u30C2\u30E3:"ja",\u30C2\u30E5:"ju",\u30C2\u30E7:"jo",\u30D3\u30E3:"bya",\u30D3\u30E5:"byu",\u30D3\u30E7:"byo",\u30D4\u30E3:"pya",\u30D4\u30E5:"pyu",\u30D4\u30E7:"pyo",\u3041:"a",\u3043:"i",\u3045:"u",\u3047:"e",\u3049:"o",\u3083:"ya",\u3085:"yu",\u3087:"yo",\u308E:"wa",\u30A1:"a",\u30A3:"i",\u30A5:"u",\u30A7:"e",\u30A9:"o",\u30E3:"ya",\u30E5:"yu",\u30E7:"yo",\u30EE:"wa",\u30F5:"ka",\u30F6:"ke",\u3093:"n",\u30F3:"n","\u3000":" ",\u3044\u3047:"ye",\u3046\u3043:"wi",\u3046\u3047:"we",\u3046\u3049:"wo",\u304D\u3047:"kye",\u304F\u3041:"kwa",\u304F\u3043:"kwi",\u304F\u3047:"kwe",\u304F\u3049:"kwo",\u3050\u3041:"gwa",\u3050\u3043:"gwi",\u3050\u3047:"gwe",\u3050\u3049:"gwo",\u30A4\u30A7:"ye",\u30A6\u30A3:"wi",\u30A6\u30A7:"we",\u30A6\u30A9:"wo",\u30F4:"vu",\u30F4\u30A1:"va",\u30F4\u30A3:"vi",\u30F4\u30A7:"ve",\u30F4\u30A9:"vo",\u30F4\u30E5:"vyu",\u30F4\u30E7:"vyo",\u30AD\u30A7:"kya",\u30AF\u30A1:"kwa",\u30AF\u30A3:"kwi",\u30AF\u30A7:"kwe",\u30AF\u30A9:"kwo",\u30B0\u30A1:"gwa",\u30B0\u30A3:"gwi",\u30B0\u30A7:"gwe",\u30B0\u30A9:"gwo",\u3057\u3047:"she",\u3058\u3047:"je",\u3061\u3047:"che",\u3064\u3041:"tsa",\u3064\u3043:"tsi",\u3064\u3047:"tse",\u3064\u3049:"tso",\u3066\u3043:"ti",\u3066\u3085:"tyu",\u3067\u3043:"di",\u3067\u3085:"dyu",\u3068\u3045:"tu",\u3069\u3045:"du",\u306B\u3047:"nye",\u3072\u3047:"hye",\u3075\u3041:"fa",\u3075\u3043:"fi",\u3075\u3047:"fe",\u3075\u3049:"fo",\u3075\u3085:"fyu",\u3075\u3087:"fyo",\u30B7\u30A7:"she",\u30B8\u30A7:"je",\u30C1\u30A7:"che",\u30C4\u30A1:"tsa",\u30C4\u30A3:"tsi",\u30C4\u30A7:"tse",\u30C4\u30A9:"tso",\u30C6\u30A3:"ti",\u30C6\u30E5:"tyu",\u30C7\u30A3:"di",\u30C7\u30E5:"dyu",\u30C8\u30A5:"tu",\u30C9\u30A5:"du",\u30CB\u30A7:"nye",\u30D2\u30A7:"hye",\u30D5\u30A1:"fa",\u30D5\u30A3:"fi",\u30D5\u30A7:"fe",\u30D5\u30A9:"fo",\u30D5\u30E5:"fyu",\u30D5\u30E7:"fyo"}},b=/(っ|ッ)([bcdfghijklmnopqrstuvwyz])/gm,B=/っ|ッ/gm,tt=0,y,h,f="";if(_===P.PASSPORT&&(i=i.replace(/ー/gm,"")),_===P.NIPPON||_===P.HEPBURN){for(var C=new RegExp(/(ん|ン)(?=あ|い|う|え|お|ア|イ|ウ|エ|オ|ぁ|ぃ|ぅ|ぇ|ぉ|ァ|ィ|ゥ|ェ|ォ|や|ゆ|よ|ヤ|ユ|ヨ|ゃ|ゅ|ょ|ャ|ュ|ョ)/g),O,E=[];(O=C.exec(i))!==null;)E.push(O.index+1);if(E.length!==0){for(var z="",R=0;R<E.length;R++)R===0?z+="".concat(i.slice(0,E[R]),"'"):z+="".concat(i.slice(E[R-1],E[R]),"'");z+=i.slice(E[E.length-1]),i=z}}for(var $=i.length;tt<=$;)(h=T[_][i.substring(tt,tt+2)])?(f+=h,tt+=2):(f+=(h=T[_][y=i.substring(tt,tt+1)])?h:y,tt+=1);return f=f.replace(b,"$2$2"),(_===P.PASSPORT||_===P.HEPBURN)&&(f=f.replace(/cc/gm,"tc")),f=f.replace(B,"tsu"),(_===P.PASSPORT||_===P.HEPBURN)&&(f=f.replace(/nm/gm,"mm"),f=f.replace(/nb/gm,"mb"),f=f.replace(/np/gm,"mp")),_===P.NIPPON&&(f=f.replace(/aー/gm,"\xE2"),f=f.replace(/iー/gm,"\xEE"),f=f.replace(/uー/gm,"\xFB"),f=f.replace(/eー/gm,"\xEA"),f=f.replace(/oー/gm,"\xF4")),_===P.HEPBURN&&(f=f.replace(/aー/gm,"\u0101"),f=f.replace(/iー/gm,"\u012B"),f=f.replace(/uー/gm,"\u016B"),f=f.replace(/eー/gm,"\u0113"),f=f.replace(/oー/gm,"\u014D")),f};o.toRawRomaji=S;var A=function(i){for(var _=!1,T=!1,b=0;b<i.length;b++)I(i[b])?_=!0:(L(i[b])||H(i[b]))&&(T=!0);return _&&T?1:_?0:T?2:3};o.getStrType=A;var F=function(i){for(var _=0;_<i.length;_++)g(i[_].surface_form)?i[_].reading?w(i[_].reading)&&(i[_].reading=s(i[_].reading)):i[_].surface_form.split("").every(M)?i[_].reading=s(i[_].surface_form):i[_].reading=i[_].surface_form:i[_].reading=i[_].surface_form;for(var T=0;T<i.length;T++)i[T].pos&&i[T].pos==="\u52A9\u52D5\u8A5E"&&(i[T].surface_form==="\u3046"||i[T].surface_form==="\u30A6")&&T-1>=0&&i[T-1].pos&&i[T-1].pos==="\u52D5\u8A5E"&&(i[T-1].surface_form+="\u3046",i[T-1].pronunciation?i[T-1].pronunciation+="\u30FC":i[T-1].pronunciation="".concat(i[T-1].reading,"\u30FC"),i[T-1].reading+="\u30A6",i.splice(T,1),T--);for(var b=0;b<i.length;b++)i[b].pos&&(i[b].pos==="\u52D5\u8A5E"||i[b].pos==="\u5F62\u5BB9\u8A5E")&&i[b].surface_form.length>1&&(i[b].surface_form[i[b].surface_form.length-1]==="\u3063"||i[b].surface_form[i[b].surface_form.length-1]==="\u30C3")&&b+1<i.length&&(i[b].surface_form+=i[b+1].surface_form,i[b].pronunciation?i[b].pronunciation+=i[b+1].pronunciation:i[b].pronunciation="".concat(i[b].reading).concat(i[b+1].reading),i[b].reading+=i[b+1].reading,i.splice(b+1,1),b--);return i};o.patchTokens=F;var D=function(i){return p(i)};o.kanaToHiragna=D;var G=function(i){return s(i)};o.kanaToKatakana=G;var st=function(i,_){return S(i,_)};o.kanaToRomaji=st},{}]},{},[4])(4)})})(gn);var zn=gn.exports;const $n=Gn(zn);console.log(dn),Dt=class{constructor(t){mn(this,"_analyzer");this._dictPath=t,this._analyzer=null}init(){return new Promise((t,n)=>{const e=this;this._analyzer==null?dn.builder({dicPath:this._dictPath}).build((r,o)=>{if(r)return n(r);e._analyzer=o,t()}):n(new Error("This analyzer has already been initialized."))})}parse(t=""){return new Promise(n=>{var r;if(t.trim()==="")return n([]);const e=(r=this._analyzer)==null?void 0:r.tokenize(t);for(const o of e)o.verbose={word_id:o.word_id,word_type:o.word_type,word_position:o.word_position},delete o.word_id,delete o.word_type,delete o.word_position;n(e)})}},zt=new $n,await zt.init(new Dt("kuromoji-dict-min"))})();export{Dt as Analyzer,Yn as __tla,zt as kuroshiro};
